<!DOCTYPE html>
<html xmlns:th = "http://www.thymeleaf.org/extras/spring-security">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
			integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">			
		
	<head>
		<meta charset="utf-8">
		<title>Login</title>
		
		<nav class="navbar bg-primary" data-bs-theme="dark">
		<!-- Navbar content -->
		</nav>
		<br>
		<br>
	</head>
	
	<body>
			<div class="container d-flex justify-content-center">
				<div class = "card">
					<div class = "card-header">
						<ul class="nav nav-tabs">
							<li class="nav-item">	
								<a class = "nav-link" th:href="@{/home/login}">
								<i class="fas fa-user"></i>Login</a>
							</li>
							<li class="nav-item">	
								<a class = "nav-link active" th:href="@{/usuario/registro}">
								<i class="fas fa-user-plus"></i>Registro</a>
							</li>
						</ul>
					</div>
					<div class="card-body">
						<div th:if="${registroOk}" class="alert alert-success alert-dismissible fade show mt-2" role="alert">
							<p th:text="${registroOk}">Valida si el registro ya está</p>
							<button type="button" class="close" data-dismiss="alert" ari-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						
						<form th:action="@{/signin}" method="post" sec:authorize="!isAuthenticated()">
							
							<!-- CONTROL ATAQUE CSRF -->
							<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
							<!-- FIN CONTROL ATAQUE CSRF -->
							
			  				<div class="form-group">
			    				<label for="nombreUsuario">Nombre de usuario</label>
			    				<input type="text" class="form-control" id="nombreUsuario" name="nombreUsuario" required="required" autocomplete="off" placeholder="Ingrese su usuario">			    					
			  				</div>
							<div class="form-group">
			    				<label for="password">Contraseña</label>
			    				<input type="password" class="form-control" id="password" name="password" required="required" autocomplete="off" placeholder="Ingrese su contraseña">			    					
			  				</div>
			  				<br>
							<div class="form-group form-check">
			    				<input type="checkbox" class="form-check-input" id="checkRememberMe" name="checkRememberMe">
			    				<label class="form-check-label" for="checkRememberMe">Recordarme</label>	    					
			  				</div>	
			  				<br>
			  				<div class="form-group aligne-center">
			    				<button type="submit" class="btn btn-outline-success btn-block">
			    					<i class="fas fa-sign-in-alt"></i>Iniciar sesión</button> 		    					
			  				</div>						
						</form>	
						
						<p sec:authorize="">Ya has iniciado sesión</p>
						
						<div th:if="${error}" class="alert alert-danger alert-dismissible fade show mt-2" role="alert">												
							<p th:text="${error}">Credenciales erróneas</p>
							<button type="button" class="close" data-dismiss="alert" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
					</div>	
				</div>
			</div>			
	</body>
	
	<!--popper-->
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
		integrity="sha384-IQsoLXl5PI+LFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
		integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
		crossorigin="anonymous"></script>
	<!--icons-->
	<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
	<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
	
</html>